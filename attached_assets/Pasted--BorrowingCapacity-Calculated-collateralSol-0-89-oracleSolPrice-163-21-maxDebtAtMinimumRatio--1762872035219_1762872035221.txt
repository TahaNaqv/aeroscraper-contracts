[BorrowingCapacity] Calculated {"collateralSol":0.89,"oracleSolPrice":163.21,"maxDebtAtMinimumRatio":126.31034782608697,"currentDebtAusd":0.0495,"capacity":126.26084782608697}
useSolanaProtocol.ts:540 üîç SOL price: 162.62
useSolanaProtocol.ts:548 üìä Borrow Loan Validation:
useSolanaProtocol.ts:549   - Current Collateral: 890000000
useSolanaProtocol.ts:550   - Current Debt: 49500000000000000
useSolanaProtocol.ts:551   - Borrowing Amount: 100000000000000000
useSolanaProtocol.ts:552   - Fee Amount: 5000000000000000
useSolanaProtocol.ts:553   - Net Loan Amount: 95000000000000000
useSolanaProtocol.ts:554   - New Total Debt: 149500000000000000
useSolanaProtocol.ts:555   - Estimated New ICR: 96810.57 %
useSolanaProtocol.ts:556   - Minimum ICR Required: 115 %
getNeighborHints.ts:35 [neighborHints] total troves: 0
getNeighborHints.ts:39 [neighborHints] top-5 sorted ICRs (micro-%):
getNeighborHints.ts:55 [neighborHints] new trove params: {user: '8gn94gQopSaw6dcF2xBBi8UDTNd7zcjxoKnPdERud9SC', collateralAmount: 890000000, loanAmount: '149500000000000000', solPriceUsd: 162.62, newICR: '96810568561'}
getNeighborHints.ts:81 [neighborHints] insertIndex: -1 finalIndex: 0
getNeighborHints.ts:91 [neighborHints] neighbors: {prev: null, next: null}
getNeighborHints.ts:109 [neighborHints] at head ‚Üí returning no hints to avoid misinterpretation
useSolanaProtocol.ts:571   - Neighbor Hints: 0
buildInstructions.ts:376 üî® Building borrow_loan instruction...
buildInstructions.ts:377   - Loan amount: 100000000000000000
buildInstructions.ts:465 ‚úÖ borrow_loan instruction built
buildInstructions.ts:466 üìä Total accounts: 23
useSolanaProtocol.ts:588 ‚úÖ Instruction built, creating transaction...
useSolanaProtocol.ts:599 üîç Simulating borrow_loan transaction...
useSolanaProtocol.ts:601 üìä Simulation result:
useSolanaProtocol.ts:602   - Error: {InstructionError: Array(2)}
useSolanaProtocol.ts:603   - Logs: (56)¬†['Program HQbV7SKnWuWPHEci5eejsnJG7qwYuQkGzJHJ6nhLZhxk invoke [1]', 'Program log: Instruction: BorrowLoan', 'Program log: üìä [borrow_loan] Getting oracle price for denom: SOL', 'Program 8Fu4YnUkfmrGQ3PTVoPfsAGjQ6NistGsiKpBEkPhzA2K invoke [2]', 'Program log: Instruction: GetPrice', 'Program log: Price query successful', 'Program log: Denom: SOL', 'Program log: Token decimal: 9', 'Program log: Price exponent: 8', 'Program log: Adjusted decimal (for micro-USD): 11', 'Program log: Publish Time: 1724967841', 'Program log: Price: 13981741499 ¬± 3495500 x 10^-8', 'Program log: Real Pyth data extracted successfully using official SDK', 'Program 8Fu4YnUkfmrGQ3PTVoPfsAGjQ6NistGsiKpBEkPhzA2K consumed 9434 of 156432 compute units', 'Program return: 8Fu4YnUkfmrGQ3PTVoPfsAGjQ6NistGsiK‚Ä¶ AwAAAFNPTLtxYEEDAAAAC6Hr0GYAAAAATFY1AAAAAAD4////', 'Program 8Fu4YnUkfmrGQ3PTVoPfsAGjQ6NistGsiKpBEkPhzA2K success', 'Program log: Oracle CPI executed successfully for denom: SOL', 'Program log: ‚úÖ [Oracle CPI] Price received from oracle:', 'Program log:   denom: SOL', 'Program log:   price: 13981741499', 'Program log:   decimal: 11', 'Program log:   exponent: -8', 'Program log:   confidence: 3495500', 'Program log:   timestamp: 1724967841', 'Program log: üìä [borrow_loan] Oracle price data:', 'Program log:   denom: SOL', 'Program log:   price: 13981741499', 'Program log:   decimal: 11', 'Program log:   exponent: -8', 'Program log:   confidence: 3495500', 'Program log: üìä [borrow_loan] Calculating collateral value:', 'Program log:   collateral_amount: 890000000', 'Program log:   new_debt_amount: 149500000000000000', 'Program log: üîç [PriceCalculator::calculate_collateral_value]', 'Program log:   amount (lamports): 890000000', 'Program log:   price (raw Pyth): 13981741499', 'Program log:   decimal (from oracle): 11', 'Program log:   decimal_factor (10^11): 100000000000', 'Program log:   amount √ó price: 12443749934110000000', 'Program log:   collateral_value (after division): 124437499', 'Program log: ‚úÖ Final collateral_value (u64): 124437499', 'Program log: üîç [PriceCalculator::calculate_collateral_ratio]', 'Program log:   collateral_value: 124437499', 'Program log:   debt_amount: 149500000000000000', 'Program log:   scaled_collateral_value (√ó10^12): 124437499000000000000', 'Program log:   numerator (√ó100): 12443749900000000000000', 'Program log:   ratio (percentage): 83235', 'Program log: ‚úÖ Final ICR: 83235%', 'Program log: üìä [borrow_loan] ICR Check:', 'Program log:   new_icr: 83235%', 'Program log:   minimum_ratio (MCR): 115000000%', 'Program log: ‚ùå ICR 83235 < MCR 115000000 ‚Üí CollateralBelowMinimum', 'Program log: AnchorError thrown in programs/aerosp‚Ä¶r: 6013. Error Message: Collateral below minimum.', 'Program HQbV7SKnWuWPHEci5eejsnJG7qwYuQkGzJHJ6nhLZhxk consumed 73394 of 200000 compute units', 'Program return: HQbV7SKnWuWPHEci5eejsnJG7qwYuQkGzJ‚Ä¶ AwAAAFNPTLtxYEEDAAAAC6Hr0GYAAAAATFY1AAAAAAD4////', 'Program HQbV7SKnWuWPHEci5eejsnJG7qwYuQkGzJHJ6nhLZhxk failed: custom program error: 0x177d']0: "Program HQbV7SKnWuWPHEci5eejsnJG7qwYuQkGzJHJ6nhLZhxk invoke [1]"1: "Program log: Instruction: BorrowLoan"2: "Program log: üìä [borrow_loan] Getting oracle price for denom: SOL"3: "Program 8Fu4YnUkfmrGQ3PTVoPfsAGjQ6NistGsiKpBEkPhzA2K invoke [2]"4: "Program log: Instruction: GetPrice"5: "Program log: Price query successful"6: "Program log: Denom: SOL"7: "Program log: Token decimal: 9"8: "Program log: Price exponent: 8"9: "Program log: Adjusted decimal (for micro-USD): 11"10: "Program log: Publish Time: 1724967841"11: "Program log: Price: 13981741499 ¬± 3495500 x 10^-8"12: "Program log: Real Pyth data extracted successfully using official SDK"13: "Program 8Fu4YnUkfmrGQ3PTVoPfsAGjQ6NistGsiKpBEkPhzA2K consumed 9434 of 156432 compute units"14: "Program return: 8Fu4YnUkfmrGQ3PTVoPfsAGjQ6NistGsiKpBEkPhzA2K AwAAAFNPTLtxYEEDAAAAC6Hr0GYAAAAATFY1AAAAAAD4////"15: "Program 8Fu4YnUkfmrGQ3PTVoPfsAGjQ6NistGsiKpBEkPhzA2K success"16: "Program log: Oracle CPI executed successfully for denom: SOL"17: "Program log: ‚úÖ [Oracle CPI] Price received from oracle:"18: "Program log:   denom: SOL"19: "Program log:   price: 13981741499"20: "Program log:   decimal: 11"21: "Program log:   exponent: -8"22: "Program log:   confidence: 3495500"23: "Program log:   timestamp: 1724967841"24: "Program log: üìä [borrow_loan] Oracle price data:"25: "Program log:   denom: SOL"26: "Program log:   price: 13981741499"27: "Program log:   decimal: 11"28: "Program log:   exponent: -8"29: "Program log:   confidence: 3495500"30: "Program log: üìä [borrow_loan] Calculating collateral value:"31: "Program log:   collateral_amount: 890000000"32: "Program log:   new_debt_amount: 149500000000000000"33: "Program log: üîç [PriceCalculator::calculate_collateral_value]"34: "Program log:   amount (lamports): 890000000"35: "Program log:   price (raw Pyth): 13981741499"36: "Program log:   decimal (from oracle): 11"37: "Program log:   decimal_factor (10^11): 100000000000"38: "Program log:   amount √ó price: 12443749934110000000"39: "Program log:   collateral_value (after division): 124437499"40: "Program log: ‚úÖ Final collateral_value (u64): 124437499"41: "Program log: üîç [PriceCalculator::calculate_collateral_ratio]"42: "Program log:   collateral_value: 124437499"43: "Program log:   debt_amount: 149500000000000000"44: "Program log:   scaled_collateral_value (√ó10^12): 124437499000000000000"45: "Program log:   numerator (√ó100): 12443749900000000000000"46: "Program log:   ratio (percentage): 83235"47: "Program log: ‚úÖ Final ICR: 83235%"48: "Program log: üìä [borrow_loan] ICR Check:"49: "Program log:   new_icr: 83235%"50: "Program log:   minimum_ratio (MCR): 115000000%"51: "Program log: ‚ùå ICR 83235 < MCR 115000000 ‚Üí CollateralBelowMinimum"52: "Program log: AnchorError thrown in programs/aerospacer-protocol/src/trove_management.rs:319. Error Code: CollateralBelowMinimum. Error Number: 6013. Error Message: Collateral below minimum."53: "Program HQbV7SKnWuWPHEci5eejsnJG7qwYuQkGzJHJ6nhLZhxk consumed 73394 of 200000 compute units"54: "Program return: HQbV7SKnWuWPHEci5eejsnJG7qwYuQkGzJHJ6nhLZhxk AwAAAFNPTLtxYEEDAAAAC6Hr0GYAAAAATFY1AAAAAAD4////"55: "Program HQbV7SKnWuWPHEci5eejsnJG7qwYuQkGzJHJ6nhLZhxk failed: custom program error: 0x177d"length: 56[[Prototype]]: Array(0)
useSolanaProtocol.ts:604   - Units consumed: 73394
useSolanaProtocol.ts:607 ‚ùå Simulation failed: {InstructionError: Array(2)}InstructionError: (2)¬†[0, {‚Ä¶}][[Prototype]]: Object
window.console.error @ app-index.js:32
console.error @ hydration-error-info.js:41
borrowLoan @ useSolanaProtocol.ts:607
await in borrowLoan
handleBorrowLoan @ TroveTab.tsx:614
await in handleBorrowLoan
callCallback @ react-dom.development.js:19449
invokeGuardedCallbackImpl @ react-dom.development.js:19498
invokeGuardedCallback @ react-dom.development.js:19573
invokeGuardedCallbackAndCatchFirstError @ react-dom.development.js:19587
executeDispatch @ react-dom.development.js:30622
processDispatchQueueItemsInOrder @ react-dom.development.js:30654
processDispatchQueue @ react-dom.development.js:30667
dispatchEventsForPlugins @ react-dom.development.js:30678
eval @ react-dom.development.js:30868
batchedUpdates$1 @ react-dom.development.js:23765
batchedUpdates @ react-dom.development.js:27584
dispatchEventForPluginEventSystem @ react-dom.development.js:30867
dispatchEvent @ react-dom.development.js:28640
dispatchDiscreteEvent @ react-dom.development.js:28611
useSolanaProtocol.ts:629 ‚ùå Borrow loan error: Error: Transaction simulation failed: {"InstructionError":[0,{"Custom":6013}]}
    at borrowLoan (useSolanaProtocol.ts:608:23)
    at async handleBorrowLoan (TroveTab.tsx:614:25)
window.console.error @ app-index.js:32
console.error @ hydration-error-info.js:41
borrowLoan @ useSolanaProtocol.ts:629
await in borrowLoan
handleBorrowLoan @ TroveTab.tsx:614
await in handleBorrowLoan
callCallback @ react-dom.development.js:19449
invokeGuardedCallbackImpl @ react-dom.development.js:19498
invokeGuardedCallback @ react-dom.development.js:19573
invokeGuardedCallbackAndCatchFirstError @ react-dom.development.js:19587
executeDispatch @ react-dom.development.js:30622
processDispatchQueueItemsInOrder @ react-dom.development.js:30654
processDispatchQueue @ react-dom.development.js:30667
dispatchEventsForPlugins @ react-dom.development.js:30678
eval @ react-dom.development.js:30868
batchedUpdates$1 @ react-dom.development.js:23765
batchedUpdates @ react-dom.development.js:27584
dispatchEventForPluginEventSystem @ react-dom.development.js:30867
dispatchEvent @ react-dom.development.js:28640
dispatchDiscreteEvent @ react-dom.development.js:28611
TroveTab.tsx:635 Error: Transaction simulation failed: {"InstructionError":[0,{"Custom":6013}]}
    at borrowLoan (useSolanaProtocol.ts:608:23)
    at async handleBorrowLoan (TroveTab.tsx:614:25)
window.console.error @ app-index.js:32
console.error @ hydration-error-info.js:41
handleBorrowLoan @ TroveTab.tsx:635
await in handleBorrowLoan
callCallback @ react-dom.development.js:19449
invokeGuardedCallbackImpl @ react-dom.development.js:19498
invokeGuardedCallback @ react-dom.development.js:19573
invokeGuardedCallbackAndCatchFirstError @ react-dom.development.js:19587
executeDispatch @ react-dom.development.js:30622
processDispatchQueueItemsInOrder @ react-dom.development.js:30654
processDispatchQueue @ react-dom.development.js:30667
dispatchEventsForPlugins @ react-dom.development.js:30678
eval @ react-dom.development.js:30868
batchedUpdates$1 @ react-dom.development.js:23765
batchedUpdates @ react-dom.development.js:27584
dispatchEventForPluginEventSystem @ react-dom.development.js:30867
dispatchEvent @ react-dom.development.js:28640
dispatchDiscreteEvent @ react-dom.development.js:28611
759The resource <URL> was preloaded using link preload but not used within a few seconds from the window's load event. Please make sure it has an appropriate `as` value and it is preloaded intentionally.
10TroveTab.tsx:182 [BorrowingCapacity] Calculated {"collateralSol":0.89,"oracleSolPrice":163.21,"maxDebtAtMinimumRatio":126.31034782608697,"currentDebtAusd":0.0495,"capacity":126.26084782608697}